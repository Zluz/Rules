{
	"debug": false,
	"labels": [ "tesla-vehicle" ],
	"vars": {
		"outside_temperature_f": " ${body.climate_state.outside_temp} * 9/5 + 32 "
	},
	"conditions": {
		"check-event-type": " '${headers.calling_action}'.includes('call-tesla-get-data-0') ",
		"check-event-vehicle": " '${headers.calling_action_endpoint}'.includes('${tesla-api-url-base}') ",
		"valid_outside_temp": " ${body.climate_state.outside_temp} > -999.0 "
	},
	"actions": {
		"action-set-var tesla temperatures": { 
			"type": "set", 
			"name": "Vehicles",
			"path": "$.Tesla_0.environmental.exterior",
			"value": "${body.climate_state.outside_temp}",
			"add": {
				"temperature_c": "${body.climate_state.outside_temp}",
				"temperature_f": "${outside_temperature_f}"
			}
		},
		"post to influx": {
			"type": "post-influx",
			"bucket": "environmental",
			"measurement": "tesla_exterior",
			"tags": {
				"vehicle": "tesla_0"
			},
			"fields": {
				"outside_temperature_c": "${body.climate_state.outside_temp}",
				"outside_temperature_f": "${outside_temperature_f}"
			}
		}
	}
}
